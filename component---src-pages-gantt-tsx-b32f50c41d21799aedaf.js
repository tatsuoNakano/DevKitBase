"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[759],{3189:function(e,t,a){a.r(t);var n=a(4506),r=a(6540),l=a(9960),s=a(6402),o=a(5615),c=a(8397);t.default=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),{0:a,1:d}=(0,r.useState)([]),{0:i,1:m}=(0,r.useState)({name:"",start:"",end:""}),{0:u,1:g}=(0,r.useState)({width:0,height:0});(0,r.useEffect)(()=>{const e=localStorage.getItem("ganttTasks");d(e?JSON.parse(e):[{id:"1",name:"要件定義",start:"2025-07-08",end:"2025-07-10"},{id:"2",name:"設計",start:"2025-07-11",end:"2025-07-14"},{id:"3",name:"実装",start:"2025-07-15",end:"2025-07-20"}])},[]),(0,r.useEffect)(()=>{localStorage.setItem("ganttTasks",JSON.stringify(a))},[a]),(0,r.useEffect)(()=>{const e=()=>{t.current&&g({width:t.current.offsetWidth,height:window.innerHeight-200})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);(0,r.useEffect)(()=>{(()=>{if(!e.current||0===u.width)return;l.Ubm(".d3-tooltip").remove();const t=40,n=80,r=40,s=80,o=u.width-s-n,c=Math.max(30*a.length,u.height-t-r),d=l.Ltv(e.current);d.selectAll("*").remove();const i=d.attr("width",o+s+n).attr("height",c+t+r).append("g").attr("transform",`translate(${s},${t})`),m=l.T6w("%Y-%m-%d"),g=a.map(e=>({...e,startDate:m(e.start),endDate:m(e.end),color:`hsl(${Math.floor(360*Math.random())}, 70%, 55%)`})),p=l.w7C().domain([l.jkA(g,e=>e.startDate),l.T9B(g,e=>e.endDate)]).range([0,o]),h=l.WH().domain(g.map(e=>e.name)).range([0,c]).padding(.2);i.append("g").attr("transform",`translate(0, ${c})`).call(l.l78(p).ticks(l.UAC.every(1)).tickFormat(l.DCK("%m/%d"))).selectAll("text").attr("fill","#ccc"),i.append("g").call(l.V4s(h)).selectAll("text").attr("fill","#ccc");const f=l.Ltv("body").append("div").attr("class","d3-tooltip").style("position","absolute").style("background","#212529").style("color","#fff").style("padding","6px 12px").style("border","1px solid #444").style("border-radius","4px").style("pointer-events","none").style("font-size","0.9rem").style("z-index","9999").style("opacity",0);i.selectAll("rect").data(g).enter().append("rect").attr("x",e=>p(e.startDate)).attr("y",e=>h(e.name)).attr("width",e=>p(e.endDate)-p(e.startDate)).attr("height",h.bandwidth()).attr("fill",e=>e.color).on("mouseover",(e,t)=>{f.html(`<strong>${t.name}</strong><br>${t.start} ～ ${t.end}`).style("opacity",1)}).on("mousemove",e=>{f.style("left",e.pageX+10+"px").style("top",e.pageY-28+"px")}).on("mouseout",()=>{f.style("opacity",0)})})()},[a,u]);return r.createElement(c.A,null,r.createElement("div",{ref:t,className:"bg-dark text-white p-4 rounded",style:{overflow:"hidden"}},r.createElement("h4",{className:"mb-3"},"ガントチャート"),r.createElement("svg",{ref:e,style:{width:"100%",height:"auto"}}),r.createElement("div",{className:"mt-4"},r.createElement("h5",null,"タスク追加"),r.createElement(s.A,{className:"row g-2"},r.createElement("div",{className:"col-md-4"},r.createElement(s.A.Control,{type:"text",placeholder:"タスク名",value:i.name,onChange:e=>m({...i,name:e.target.value})})),r.createElement("div",{className:"col-md-3"},r.createElement(s.A.Control,{type:"date",value:i.start,onChange:e=>m({...i,start:e.target.value})})),r.createElement("div",{className:"col-md-3"},r.createElement(s.A.Control,{type:"date",value:i.end,onChange:e=>m({...i,end:e.target.value})})),r.createElement("div",{className:"col-md-2"},r.createElement(o.A,{variant:"outline-info",onClick:()=>{if(!i.name||!i.start||!i.end)return;const e=Date.now().toString();d([].concat((0,n.A)(a),[{id:e,...i}])),m({name:"",start:"",end:""})},className:"w-100"},"追加")))),r.createElement("div",{className:"mt-3"},r.createElement("h5",null,"登録済みタスク"),r.createElement("ul",{className:"list-group list-group-flush"},a.map(e=>r.createElement("li",{key:e.id,className:"list-group-item d-flex justify-content-between align-items-center bg-dark text-white border-secondary"},r.createElement("div",null,e.name,"（",e.start," ～ ",e.end,"）"),r.createElement(o.A,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void d(a.filter(e=>e.id!==t));var t}},"削除")))))))}}}]);
//# sourceMappingURL=component---src-pages-gantt-tsx-b32f50c41d21799aedaf.js.map