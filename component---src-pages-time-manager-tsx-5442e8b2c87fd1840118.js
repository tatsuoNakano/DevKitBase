"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[694],{616:function(e,t,a){var r=a(6942),n=a.n(r),l=a(6540),s=a(6519),o=a(4848);const i=l.forwardRef(({bsPrefix:e,size:t,vertical:a=!1,className:r,role:l="group",as:i="div",...c},d)=>{const m=(0,s.oU)(e,"btn-group");let u=m;return a&&(u=`${m}-vertical`),(0,o.jsx)(i,{...c,ref:d,role:l,className:n()(r,u,t&&`${m}-${t}`)})});i.displayName="ButtonGroup",t.A=i},1469:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var r=a(6540),n=a(3048),l=a(4479),s=a(1105),o=a(8397),i=a(4506),c=a(6402),d=a(6942),m=a.n(d),u=a(6519),f=a(9528),b=a(4848);function v(e,t,a){const r=(e-t)/(a-t)*100;return Math.round(1e3*r)/1e3}function g({min:e,now:t,max:a,label:r,visuallyHidden:n,striped:l,animated:s,className:o,style:i,variant:c,bsPrefix:d,...u},f){return(0,b.jsx)("div",{ref:f,...u,role:"progressbar",className:m()(o,`${d}-bar`,{[`bg-${c}`]:c,[`${d}-bar-animated`]:s,[`${d}-bar-striped`]:s||l}),style:{width:`${v(t,e,a)}%`,...i},"aria-valuenow":t,"aria-valuemin":e,"aria-valuemax":a,children:n?(0,b.jsx)("span",{className:"visually-hidden",children:r}):r})}const k=r.forwardRef(({isChild:e=!1,...t},a)=>{const n={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...t};if(n.bsPrefix=(0,u.oU)(n.bsPrefix,"progress"),e)return g(n,a);const{min:l,now:s,max:o,label:i,visuallyHidden:c,striped:d,animated:v,bsPrefix:k,variant:p,className:w,children:h,...N}=n;return(0,b.jsx)("div",{ref:a,...N,className:m()(w,k),children:h?(0,f.Tj)(h,e=>(0,r.cloneElement)(e,{isChild:!0})):g({min:l,now:s,max:o,label:i,visuallyHidden:c,striped:d,animated:v,bsPrefix:k,variant:p},a)})});k.displayName="ProgressBar";var p=k,w=a(5615);const h="pomodoro-timer";var N=()=>{const{0:e,1:t}=(0,r.useState)(0),{0:a,1:n}=(0,r.useState)(0),{0:l,1:s}=(0,r.useState)(!1),{0:o,1:d}=(0,r.useState)(!1),{0:m,1:u}=(0,r.useState)(0),{0:f,1:b}=(0,r.useState)(!1),v=(0,r.useRef)(null),g=(0,r.useRef)(""),k=e=>{localStorage.setItem(h,JSON.stringify(e))},N=()=>{v.current&&clearInterval(v.current),v.current=setInterval(()=>{t(e=>{const t=e-1;return t<=0?(clearInterval(v.current),s(!1),a=g.current,window.safeAPI&&window.safeAPI.notify(a,"時間になりました！"),"Notification"in window&&("granted"===Notification.permission?new Notification(a,{body:"時間になりました！",icon:"assets/icon.png"}):Notification.requestPermission().then(e=>{"granted"===e&&new Notification(a,{body:"時間になりました！",icon:"assets/icon.png"})})),alert("時間です！"),"Pomodoro 完了"===g.current&&u(e=>Math.min(e+1,12)),localStorage.removeItem(h),0):t;var a})},1e3)},E=(e,a)=>{const r=Date.now();t(e),n(e),s(!0),d(!1),g.current=a,k({startedAt:r,totalSeconds:e,isPaused:!1,isRunning:!0,label:a,completedSessions:m}),N()};return(0,r.useEffect)(()=>{const e=e=>{e.target.closest(".dropdown-button")||b(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.useEffect)(()=>((()=>{const e=localStorage.getItem(h);if(!e)return;const{startedAt:a,totalSeconds:r,isPaused:l,isRunning:o,label:i,completedSessions:c}=JSON.parse(e),m=Math.floor((Date.now()-a)/1e3),f=Math.max(r-m,0);t(f),n(r),d(l),s(o),u(c||0),g.current=i,o&&!l&&f>0&&N()})(),()=>{v.current&&clearInterval(v.current)}),[]),r.createElement("div",null,r.createElement(c.A.Group,{controlId:"work-minutes"},r.createElement(c.A.Label,null,"作業時間（分）"),r.createElement(c.A.Control,{type:"number",defaultValue:25,className:"bg-dark text-light border-info fs-3"})),r.createElement("h3",{className:"mt-3 fs-1 text-light",id:"timer-display"},(S=e,`${String(Math.floor(S/60)).padStart(2,"0")}:${String(S%60).padStart(2,"0")}`)),r.createElement(p,{now:a?(a-e)/a*100:0,variant:"info",className:"mb-3",id:"progress-bar"}),r.createElement("div",{className:"d-flex gap-2"},r.createElement(w.A,{id:"start-timer",variant:"outline-light",onClick:()=>{var e;const t=parseInt((null===(e=document.getElementById("work-minutes"))||void 0===e?void 0:e.value)||"25");isNaN(t)||E(60*t,"Pomodoro 完了")}},"▶ 作業開始"),r.createElement(w.A,{id:"break-timer",variant:"outline-light",onClick:()=>{E(300,"休憩終了")}},"休憩"),r.createElement(w.A,{id:"stop-timer",variant:"outline-light",onClick:()=>{l&&d(t=>{const r=!t;if(r)v.current&&clearInterval(v.current);else{const t=Date.now()-1e3*(a-e);k({startedAt:t,totalSeconds:a,isPaused:!1,isRunning:l,label:g.current,completedSessions:m}),N()}return r})}},o?"▶ 再開":"一時停止")),r.createElement("div",{id:"indicator-container",className:"mt-3"},(0,i.A)(Array(12)).map((e,t)=>r.createElement("span",{key:t,className:"dot mx-1",style:{display:"inline-block",width:10,height:10,borderRadius:"50%",backgroundColor:t<m?"#0dcaf0":"#6c757d"}}))));var S},E=a(616),S=a(9960);var x=e=>{let{workSeconds:t,breakSeconds:a}=e;const n=(0,r.useRef)(null),l=[{label:"作業時間",value:t,color:"#0d6efd"},{label:"休憩時間",value:a,color:"#20c997"},{label:"その他",value:Math.max(0,86400-t-a),color:"#6c757d"}];return(0,r.useEffect)(()=>{const e=S.Ltv(n.current);e.selectAll("*").remove();const t=Math.min(320,320)/2-10,a=S.rLf().value(e=>e.value).sort(null),r=S.JLW().innerRadius(60).outerRadius(t),s=e.append("g").attr("transform","translate(160,160)");s.selectAll("path").data(a(l)).enter().append("path").attr("d",r).attr("fill",(e,t)=>l[t].color).attr("stroke","#111").attr("stroke-width","1"),s.selectAll("text").data(a(l)).enter().append("text").attr("transform",e=>`translate(${r.centroid(e)})`).attr("text-anchor","middle").attr("fill","#fff").attr("font-size","10px").text(e=>`${e.data.label}`)},[t,a]),r.createElement("svg",{ref:n,width:320,height:320})};const y=()=>(new Date).toISOString().split("T")[0];var A=()=>{const{0:e,1:t}=(0,r.useState)(null),{0:a,1:n}=(0,r.useState)(!1),{0:l,1:s}=(0,r.useState)({work:0,break:0}),o=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=`worktimer-${y()}`,a=localStorage.getItem(e);if(a){const e=JSON.parse(a),r=Date.now();let l=0;e.isRunning&&e.startedAt&&(l=Math.floor((r-e.startedAt)/1e3));const o={work:e.work+("work"===e.mode?l:0),break:e.break+("break"===e.mode?l:0)};s(o),n(e.isRunning),t(e.mode)}},[]),(0,r.useEffect)(()=>(a&&e?o.current=setInterval(()=>{s(t=>{const a={...t,[e]:t[e]+1};return localStorage.setItem(`worktimer-${y()}`,JSON.stringify({isRunning:!0,mode:e,startedAt:Date.now(),work:a.work,break:a.break})),a})},1e3):o.current&&clearInterval(o.current),()=>{o.current&&clearInterval(o.current)}),[a,e]);const i=e=>{t(e),n(!0),localStorage.setItem(`worktimer-${y()}`,JSON.stringify({isRunning:!0,mode:e,startedAt:Date.now(),work:l.work,break:l.break}))};return r.createElement("div",{className:"d-flex justify-content-center bg-dark text-white"},r.createElement("div",{className:"text-center py-4"},r.createElement("h5",{className:"mb-3"},"今日の作業タイマー"),r.createElement(E.A,{className:"mb-3"},r.createElement(w.A,{variant:"work"===e?"primary":"outline-light",onClick:()=>i("work")},"作業開始"),r.createElement(w.A,{variant:"break"===e?"success":"outline-light",onClick:()=>i("break")},"休憩開始"),r.createElement(w.A,{variant:"outline-light",onClick:()=>n(!a)},a?"一時停止":"再開"),r.createElement(w.A,{variant:"outline-light",onClick:()=>{n(!1),t(null),localStorage.setItem(`worktimer-${y()}`,JSON.stringify({isRunning:!1,mode:null,startedAt:null,work:l.work,break:l.break}))}},"停止")),r.createElement("div",{className:"mb-3"},r.createElement("p",{className:"fs-1 mb-1"},"作業時間: ",(l.work/60).toFixed(1)," 分"),r.createElement("p",{className:"fs-1"},"休憩時間: ",(l.break/60).toFixed(1)," 分")),r.createElement(x,{workSeconds:l.work,breakSeconds:l.break})))};var $=()=>r.createElement(o.A,null,r.createElement(n.A,{fluid:!0,className:"text-light py-4"},r.createElement(l.A,null,r.createElement(s.A,{md:6,className:"mb-4"},r.createElement("div",{className:"bg-dark p-3 rounded shadow"},r.createElement("h4",{className:" mb-3"},"作業タイマー"),r.createElement(A,null))),r.createElement(s.A,{md:6,className:"mb-4"},r.createElement("div",{className:"bg-dark p-3 rounded shadow"},r.createElement("h4",{className:"mb-3"},"ポモドーロタイマー"),r.createElement(N,null))))))},3048:function(e,t,a){var r=a(6942),n=a.n(r),l=a(6540),s=a(6519),o=a(4848);const i=l.forwardRef(({bsPrefix:e,fluid:t=!1,as:a="div",className:r,...l},i)=>{const c=(0,s.oU)(e,"container"),d="string"==typeof t?`-${t}`:"-fluid";return(0,o.jsx)(a,{ref:i,...l,className:n()(r,t?`${c}${d}`:c)})});i.displayName="Container",t.A=i},4479:function(e,t,a){var r=a(6942),n=a.n(r),l=a(6540),s=a(6519),o=a(4848);const i=l.forwardRef(({bsPrefix:e,className:t,as:a="div",...r},l)=>{const i=(0,s.oU)(e,"row"),c=(0,s.gy)(),d=(0,s.Jm)(),m=`${i}-cols`,u=[];return c.forEach(e=>{const t=r[e];let a;delete r[e],null!=t&&"object"==typeof t?({cols:a}=t):a=t;const n=e!==d?`-${e}`:"";null!=a&&u.push(`${m}${n}-${a}`)}),(0,o.jsx)(a,{ref:l,...r,className:n()(t,i,...u)})});i.displayName="Row",t.A=i}}]);
//# sourceMappingURL=component---src-pages-time-manager-tsx-5442e8b2c87fd1840118.js.map