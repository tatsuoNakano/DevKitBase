"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[126],{3048:function(e,a,t){var r=t(6942),s=t.n(r),l=t(6540),n=t(6519),o=t(4848);const c=l.forwardRef(({bsPrefix:e,fluid:a=!1,as:t="div",className:r,...l},c)=>{const d=(0,n.oU)(e,"container"),i="string"==typeof a?`-${a}`:"-fluid";return(0,o.jsx)(t,{ref:c,...l,className:s()(r,a?`${d}${i}`:d)})});c.displayName="Container",a.A=c},4479:function(e,a,t){var r=t(6942),s=t.n(r),l=t(6540),n=t(6519),o=t(4848);const c=l.forwardRef(({bsPrefix:e,className:a,as:t="div",...r},l)=>{const c=(0,n.oU)(e,"row"),d=(0,n.gy)(),i=(0,n.Jm)(),m=`${c}-cols`,f=[];return d.forEach(e=>{const a=r[e];let t;delete r[e],null!=a&&"object"==typeof a?({cols:t}=a):t=a;const s=e!==i?`-${e}`:"";null!=t&&f.push(`${m}${s}-${t}`)}),(0,o.jsx)(t,{ref:l,...r,className:s()(a,c,...f)})});c.displayName="Row",a.A=c},8358:function(e,a,t){t.r(a),t.d(a,{default:function(){return J}});var r=t(4506),s=t(6540),l=t(9960),n=t(3048),o=t(4479),c=t(1105),d=t(6942),i=t.n(d),m=t(6519),f=t(4848);const u=s.forwardRef(({className:e,bsPrefix:a,as:t="div",...r},s)=>(a=(0,m.oU)(a,"card-body"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));u.displayName="CardBody";var p=u;const x=s.forwardRef(({className:e,bsPrefix:a,as:t="div",...r},s)=>(a=(0,m.oU)(a,"card-footer"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));x.displayName="CardFooter";var y=x;const v=s.createContext(null);v.displayName="CardHeaderContext";var N=v;const g=s.forwardRef(({bsPrefix:e,className:a,as:t="div",...r},l)=>{const n=(0,m.oU)(e,"card-header"),o=(0,s.useMemo)(()=>({cardHeaderBsPrefix:n}),[n]);return(0,f.jsx)(N.Provider,{value:o,children:(0,f.jsx)(t,{ref:l,...r,className:i()(a,n)})})});g.displayName="CardHeader";var b=g;const E=s.forwardRef(({bsPrefix:e,className:a,variant:t,as:r="img",...s},l)=>{const n=(0,m.oU)(e,"card-img");return(0,f.jsx)(r,{ref:l,className:i()(t?`${n}-${t}`:n,a),...s})});E.displayName="CardImg";var A=E;const h=s.forwardRef(({className:e,bsPrefix:a,as:t="div",...r},s)=>(a=(0,m.oU)(a,"card-img-overlay"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));h.displayName="CardImgOverlay";var C=h;const w=s.forwardRef(({className:e,bsPrefix:a,as:t="a",...r},s)=>(a=(0,m.oU)(a,"card-link"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));w.displayName="CardLink";var j=w,k=t(4373);const R=(0,k.A)("h6"),$=s.forwardRef(({className:e,bsPrefix:a,as:t=R,...r},s)=>(a=(0,m.oU)(a,"card-subtitle"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));$.displayName="CardSubtitle";var P=$;const S=s.forwardRef(({className:e,bsPrefix:a,as:t="p",...r},s)=>(a=(0,m.oU)(a,"card-text"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));S.displayName="CardText";var U=S;const I=(0,k.A)("h5"),B=s.forwardRef(({className:e,bsPrefix:a,as:t=I,...r},s)=>(a=(0,m.oU)(a,"card-title"),(0,f.jsx)(t,{ref:s,className:i()(e,a),...r})));B.displayName="CardTitle";var L=B;const O=s.forwardRef(({bsPrefix:e,className:a,bg:t,text:r,border:s,body:l=!1,children:n,as:o="div",...c},d)=>{const u=(0,m.oU)(e,"card");return(0,f.jsx)(o,{ref:d,...c,className:i()(a,u,t&&`bg-${t}`,r&&`text-${r}`,s&&`border-${s}`),children:l?(0,f.jsx)(p,{children:n}):n})});O.displayName="Card";var z=Object.assign(O,{Img:A,Title:L,Subtitle:P,Body:p,Link:j,Text:U,Header:b,Footer:y,ImgOverlay:C}),T=t(6402),H=t(5615),_=t(8397);const F="mindmap-nodes";var J=()=>{const{0:e,1:a}=(0,s.useState)([{id:"root",name:"Root",parent:null}]),{0:t,1:d}=(0,s.useState)(""),{0:i,1:m}=(0,s.useState)("root"),f=(0,s.useRef)(null),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=localStorage.getItem(F);if(e)try{const t=JSON.parse(e);Array.isArray(t)&&a(t)}catch(t){console.error("Failed to parse localStorage data",t)}},[]),(0,s.useEffect)(()=>{localStorage.setItem(F,JSON.stringify(e))},[e]);return(0,s.useEffect)(()=>{if(!f.current||!u.current)return;const a=window.innerWidth,t=l.Ltv(f.current);t.selectAll("*").remove();const r=l.Ltv(u.current),s=e.filter(a=>null===a.parent||e.find(e=>e.id===a.parent));try{const e=l.zTO().id(e=>e.id).parentId(e=>e.parent||void 0)(s);l.B22().size([a-100,700])(e);const n=t.append("g").attr("transform","translate(50,50)");n.selectAll("line").data(e.links()).join("line").attr("stroke","#aaa").attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y);const o=n.selectAll("g.node").data(e.descendants()).join("g").attr("transform",e=>`translate(${e.x},${e.y})`);o.append("circle").attr("r",20).attr("fill","#0d6efd").on("mouseenter",(e,a)=>{r.style("display","block").text(a.data.name)}).on("mousemove",e=>{r.style("left",e.pageX+10+"px").style("top",e.pageY+10+"px")}).on("mouseleave",()=>{r.style("display","none")}),o.append("text").text(e=>e.data.name).attr("dy",5).attr("x",0).attr("text-anchor","middle").attr("fill","white")}catch(n){console.error("stratify error:",n)}},[e]),s.createElement(_.A,null,s.createElement("div",{style:{backgroundColor:"#121212",color:"#ffffff",paddingBottom:"2rem"}},s.createElement("div",{ref:u,style:{position:"absolute",background:"#333",color:"#fff",padding:"5px 10px",borderRadius:"4px",pointerEvents:"none",fontSize:"0.9rem",display:"none",zIndex:1e3}}),s.createElement("div",{className:"my-3"},s.createElement("svg",{ref:f,width:"100%",height:"800",style:{backgroundColor:"#1e1e1e",border:"1px solid #444"}})),s.createElement(n.A,null,s.createElement(o.A,null,s.createElement(c.A,{md:6},s.createElement(z,{bg:"dark",text:"light",className:"mb-3"},s.createElement(z.Body,null,s.createElement(T.A,null,s.createElement(T.A.Group,{className:"mb-2"},s.createElement(T.A.Label,null,"ノード名"),s.createElement(T.A.Control,{type:"text",value:t,onChange:e=>d(e.target.value),placeholder:"例：アイデアA"})),s.createElement(T.A.Group,{className:"mb-2"},s.createElement(T.A.Label,null,"親ノード"),s.createElement(T.A.Select,{value:i,onChange:e=>m(e.target.value)},e.map(e=>s.createElement("option",{key:e.id,value:e.id},e.name)))),s.createElement("div",{className:"d-flex gap-2"},s.createElement(H.A,{variant:"primary",onClick:()=>{if(!t.trim())return;const s={id:`${Date.now()}`,name:t,parent:i};a([].concat((0,r.A)(e),[s])),d("")}},"追加"),s.createElement(H.A,{variant:"danger",onClick:()=>{a([{id:"root",name:"Root",parent:null}])}},"オールリセット")))))),s.createElement(c.A,{md:6},s.createElement("h5",null,"ノード一覧"),s.createElement("ul",{className:"list-group"},e.filter(e=>"root"!==e.id).map(t=>s.createElement("li",{key:t.id,className:"list-group-item d-flex justify-content-between align-items-center"},t.name,s.createElement(H.A,{variant:"outline-danger",size:"sm",onClick:()=>(t=>{const r=e.filter(e=>e.id!==t&&e.parent!==t);a(r)})(t.id)},"削除")))))))))}}}]);
//# sourceMappingURL=component---src-pages-maindmap-tsx-c35e42d502cd38bfb244.js.map